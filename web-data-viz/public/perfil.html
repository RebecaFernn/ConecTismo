<!DOCTYPE html>
<html lang="pt-br">

<head>
    <link rel="shortcut icon" href="assets/Icon.png" type="image/x-icon">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ConecTismo</title>

    <link rel="stylesheet" href="./../css/dashboards.css">
    <link rel="stylesheet" href="dashboard/Conectismo.css">
    <script src="../js/sessao.js"></script>
    <script src="./../js/alerta.js"></script>

        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Lilita+One&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Lilita+One&family=Shadows+Into+Light+Two&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    
</head>

<body style="background-color: #161618;">

    <div class="NAV">
        <div class="sair">
            <button onclick="limparSessao()">⬅</button>
        </div>
        <div class="user">
            <h2><span id="b_usuario">usuário</span></h2>
        </div>
        <a href="mural.html">Página Inicial</a>
        <b>Sobre</b>
        <img src="assets/Logo (2).png" alt="">
        
    </div>
    
    <div class="Conteudo">
        <div class="estrelas">
            <div onclick="estrela1()"></div>
            <div onclick="estrela2()"></div>
            <div onclick="estrela3()"></div>
            <div onclick="estrela4()"></div>
            <div onclick="estrela5()"></div>
        </div>
        
    </div>



</body>

</html>

<script>

    var avaliação = []
    
    function avaliacao() {
    

    
    var valor = avaliação[0];
    var idUsuario = sessionStorage.ID_USUARIO;
    

    fetch("/grafico/avaliacao", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        valorServer : valor,
        idUsuarioServer : idUsuario
      }),
    })
      .then(function (resposta) {
        console.log("resposta: ", resposta);

        if (resposta.ok) {

          alert
            ("Avaliação realizada");


        }else {
          throw "Houve um erro ao tentar realizar o cadastro da avaliação!";
        }
      })
      .catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
        
      });

    return false;
  }


    function estrela1() {
        if (avaliação.length == 0) {
            avaliação.push("indiferença")
            alert("Agradecemos a sua avaliação!")
            
            avaliacao()
        }else{
            alert("Você já avaliou")
        }
    }
    function estrela2() {
        if (avaliação.length == 0) {
            avaliação.push("melhorar")
            alert("Agradecemos a sua avaliação!")

            avaliacao()
        }else{
            alert("Você já avaliou")
        }
    }
    function estrela3() {
        if (avaliação.length == 0) {
            avaliação.push("apoio")
            alert("Agradecemos a sua avaliação!")

            avaliacao()
        }else{
            alert("Você já avaliou")
        }
    }
    function estrela4() {
        if (avaliação.length == 0) {
            avaliação.push("gostei")
            alert("Agradecemos a sua avaliação!")
            
            avaliacao()
        }else{
            alert("Você já avaliou")
        }
    }
    function estrela5() {
        if (avaliação.length == 0) {
            avaliação.push("amei")
            alert("Agradecemos a sua avaliação!")
            
            avaliacao()
        }else{
            alert("Você já avaliou")
        }
    }
</script>
